<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#f5f5f7" id="themeColor">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="B-SIDE">
  <title>B-SIDE</title>

  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
  <link rel="apple-touch-icon" href="icon-192.png">

  <!-- CSS Modules -->
  <link rel="stylesheet" href="css/variables.css">
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
  <div class="player">
    <div class="player-header">
      <div class="header-actions">
        <button class="icon-btn" id="infoBtn" title="Info">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
        </button>
        <button class="icon-btn" id="themeBtn" title="Tema">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="themeIcon"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
        </button>
      </div>
      <div class="header-actions">
        <button class="icon-btn fav-btn" id="favBtn" title="Preferito">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
        </button>
        <button class="icon-btn" id="menuBtn" title="Preferiti">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
        </button>
      </div>
    </div>
    <div class="artwork-container">
      <div class="artwork"><span class="artwork-title">B-SIDE</span><span class="artwork-subtitle">RADIO CAPITAL</span></div>
    </div>
    <div class="track-info">
      <div class="track-title" id="episodeDate">--/--/----</div>
      <div class="track-artist">Alessio Bertallot</div>
    </div>
    <div class="progress-container">
      <div class="progress-bar" id="progressBar">
        <div class="buffer-bar" id="bufferBar"></div>
        <div class="progress-fill" id="progressFill"><div class="progress-thumb"></div></div>
      </div>
      <div class="time-display"><span id="currentTime">0:00</span><span id="remainingTime">-0:00</span></div>
    </div>
    <div class="controls">
      <button class="ctrl-btn nav-btn" id="prevDay"><svg viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg></button>
      <button class="ctrl-btn skip-btn" id="skipBack">-30</button>
      <button class="ctrl-btn play-btn" id="playBtn"><svg viewBox="0 0 24 24" id="playIcon"><polygon points="6,4 20,12 6,20"/></svg></button>
      <button class="ctrl-btn skip-btn" id="skipForward">+30</button>
      <button class="ctrl-btn nav-btn" id="nextDay"><svg viewBox="0 0 24 24"><path d="M16 6h2v12h-2zM6 18l8.5-6L6 6z"/></svg></button>
    </div>
    <div class="bottom-bar">
      <div class="date-selector">
        <button class="date-nav-btn" id="prevDayNav"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="15 18 9 12 15 6"/></svg></button>
        <div class="date-picker-btn" id="datePickerBtn"><span class="date-display" id="dateDisplay">--/--/----</span><input type="date" id="datePicker"></div>
        <button class="date-nav-btn" id="nextDayNav"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="9 18 15 12 9 6"/></svg></button>
      </div>
      <div class="secondary-controls">
        <button class="secondary-btn" id="sleepBtn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="sleepIcon"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><span class="sleep-countdown" id="sleepCountdown" style="display:none;"></span></button>
        <button class="secondary-btn" id="volumeNavBtn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="volumeIcon"><path d="M11 5L6 9H2v6h4l5 4V5z"/><path d="M15.54 8.46a5 5 0 010 7.07"/><path d="M19.07 4.93a10 10 0 010 14.14"/></svg></button>
      </div>
    </div>
  </div>

  <!-- Popup Overlays -->
  <div class="popup-overlay" id="volumeOverlay">
    <div class="popup-content">
      <div class="popup-header"><h3>Volume</h3></div>
      <div class="volume-content">
        <div class="volume-slider-container">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 5L6 9H2v6h4l5 4V5z"/></svg>
          <div class="volume-slider" id="volumeSlider"><div class="volume-fill" id="volumeFill"></div></div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 5L6 9H2v6h4l5 4V5z"/><path d="M15.54 8.46a5 5 0 010 7.07"/><path d="M19.07 4.93a10 10 0 010 14.14"/></svg>
        </div>
      </div>
    </div>
  </div>

  <div class="popup-overlay" id="sleepOverlay">
    <div class="popup-content">
      <div class="popup-header"><h3>Timer Spegnimento</h3></div>
      <div class="sleep-options">
        <div class="sleep-option" data-min="5">5 minuti</div>
        <div class="sleep-option" data-min="15">15 minuti</div>
        <div class="sleep-option" data-min="30">30 minuti</div>
        <div class="sleep-option" data-min="45">45 minuti</div>
        <div class="sleep-option" data-min="60">1 ora</div>
        <div class="sleep-option" data-min="0">Disattiva</div>
      </div>
    </div>
  </div>

  <div class="popup-overlay" id="favOverlay">
    <div class="popup-content">
      <div class="popup-header"><h3>Preferiti</h3></div>
      <div class="favorites-content" id="favList"></div>
    </div>
  </div>

  <div class="popup-overlay" id="infoOverlay">
    <div class="popup-content">
      <div class="popup-header"><h3>Informazioni</h3></div>
      <div class="info-options">
        <div class="info-item app-title">B-SIDE</div>
        <div class="info-item" id="appVersion"></div>
        <div class="info-item app-desc">Player per il podcast B-SIDE<br>di Alessio Bertallot su Radio Capital</div>
        <div class="info-item" id="appBuild"></div>
        <div class="info-item">Sviluppato da Marco Mauro<br>con il supporto di Claude AI</div>
      </div>
    </div>
  </div>

  <!-- Toast Notification -->
  <div class="toast" id="toast"></div>

  <!-- Install Prompt -->
  <div class="install-prompt" id="installPrompt">
    <p>Installa B-SIDE</p>
    <button class="install-btn" id="installBtn">Installa</button>
    <button class="install-close" id="installClose">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
        <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
      </svg>
    </button>
  </div>

  <!-- Audio Element -->
  <audio id="audio" preload="auto"></audio>

  <!-- JavaScript Module -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
